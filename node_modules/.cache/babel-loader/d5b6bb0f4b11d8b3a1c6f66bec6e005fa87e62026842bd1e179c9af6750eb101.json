{"ast":null,"code":"import{useDispatch,useSelector}from\"react-redux\";import styles from\"./InfoAboutMovie.module.css\";import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{fetchMovieById}from\"../../store/movieSliсe\";import{fetchRundomMovie}from\"../../store/randomMovieSlice\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const InfoAboutMovie=()=>{const dispatch=useDispatch();const{id}=useParams();const[isFetched,setIsFetched]=useState(false);const{data:randomMovie,loading:randomLoading,error:randomError}=useSelector(state=>state.movieRandom||{data:null,loading:false,error:null});const{data:selectedMovie,loading:selectedLoading,error:selectedError}=useSelector(state=>state.movieById||{data:null,loading:false,error:null});useEffect(()=>{if(id){const movieId=String(id);// Преобразуем id в строку\ndispatch(fetchMovieById(movieId));// Запрос по id\n}else if(!randomMovie&&!isFetched){dispatch(fetchRundomMovie());// Запрос случайного фильма, если нет id и фильм не был загружен\nsetIsFetched(true);}},[dispatch,id,randomMovie,isFetched]);const movie=id?selectedMovie:randomMovie;const loading=id?selectedLoading:randomLoading;const error=id?selectedError:randomError;const details=[{label:\"Язык оригинала\",value:(movie===null||movie===void 0?void 0:movie.language)||\"Не указано\"},{label:\"Бюджет\",value:movie!==null&&movie!==void 0&&movie.budget?`${movie.budget} $`:\"Не указано\"},{label:\"Выручка\",value:movie!==null&&movie!==void 0&&movie.revenue?`${movie.revenue} $`:\"Не указано\"},{label:\"Режиссёр\",value:(movie===null||movie===void 0?void 0:movie.director)||\"Не указано\"},{label:\"Продакшен\",value:(movie===null||movie===void 0?void 0:movie.production)||\"Не указано\"},{label:\"Награды\",value:(movie===null||movie===void 0?void 0:movie.awardsSummary)||\"Нет наград\"}];const formatTime=minutes=>{const hours=Math.floor(minutes/60);const min=minutes%60;return hours===0?`${min}мин`:`${hours}ч ${min}мин`;};// if (loading) return <p>Загрузка...</p>;\nif(error)return/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \",error]});// if (!movie) return <p>Фильм не найден</p>;\nreturn/*#__PURE__*/_jsxs(\"div\",{className:styles.infoAboutMovie,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.infoAboutMovie__title,children:\"\\u041E \\u0444\\u0438\\u043B\\u044C\\u043C\\u0435\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.description,children:details.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:styles.description__line,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.description__name,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.description__text,children:item.label}),/*#__PURE__*/_jsx(\"div\",{className:styles.description__border})]}),/*#__PURE__*/_jsx(\"span\",{className:styles.description__data,children:item.value})]},index))})]});};export default InfoAboutMovie;","map":{"version":3,"names":["useDispatch","useSelector","styles","useEffect","useState","useParams","fetchMovieById","fetchRundomMovie","jsxs","_jsxs","jsx","_jsx","InfoAboutMovie","dispatch","id","isFetched","setIsFetched","data","randomMovie","loading","randomLoading","error","randomError","state","movieRandom","selectedMovie","selectedLoading","selectedError","movieById","movieId","String","movie","details","label","value","language","budget","revenue","director","production","awardsSummary","formatTime","minutes","hours","Math","floor","min","children","className","infoAboutMovie","infoAboutMovie__title","description","map","item","index","description__line","description__name","description__text","description__border","description__data"],"sources":["/Users/kirillonucin/Desktop/finalProjectReact/src/components/aboutMovie/InfoAboutMovie.tsx"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch } from \"../../store/store\";\nimport styles from \"./InfoAboutMovie.module.css\";\nimport MovieData from \"../../types/mainTypes\";\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { fetchMovieById } from \"../../store/movieSliсe\";\nimport { fetchRundomMovie } from \"../../store/randomMovieSlice\";\n\ninterface RootState {\n    movieRandom: {\n        data: MovieData | null;\n        loading: boolean;\n        error: string | null;\n    };\n    movieById: {\n        data: MovieData | null;\n        loading: boolean;\n        error: string | null;\n    };\n}\n\nconst InfoAboutMovie = () => {\n    const dispatch = useDispatch<AppDispatch>();\n    const { id } = useParams<{ id?: string }>();\n    const [isFetched, setIsFetched] = useState(false);\n\n    const { data: randomMovie, loading: randomLoading, error: randomError } = useSelector(\n        (state: RootState) => state.movieRandom || { data: null, loading: false, error: null }\n    );\n    const { data: selectedMovie, loading: selectedLoading, error: selectedError } = useSelector(\n        (state: RootState) => state.movieById || { data: null, loading: false, error: null }\n    );\n\n    useEffect(() => {\n        if (id) {\n            const movieId = String(id); // Преобразуем id в строку\n            dispatch(fetchMovieById(movieId)); // Запрос по id\n        } else if (!randomMovie && !isFetched) {\n            dispatch(fetchRundomMovie()); // Запрос случайного фильма, если нет id и фильм не был загружен\n            setIsFetched(true);\n        }\n    }, [dispatch, id, randomMovie, isFetched]);\n\n    const movie = id ? selectedMovie : randomMovie;\n    const loading = id ? selectedLoading : randomLoading;\n    const error = id ? selectedError : randomError;\n\n    const details = [\n        { label: \"Язык оригинала\", value: movie?.language || \"Не указано\" },\n        { label: \"Бюджет\", value: movie?.budget ? `${movie.budget} $` : \"Не указано\" },\n        { label: \"Выручка\", value: movie?.revenue ? `${movie.revenue} $` : \"Не указано\" },\n        { label: \"Режиссёр\", value: movie?.director || \"Не указано\" },\n        { label: \"Продакшен\", value: movie?.production || \"Не указано\" },\n        { label: \"Награды\", value: movie?.awardsSummary || \"Нет наград\" },\n    ];\n\n    const formatTime = (minutes: number): string => {\n        const hours = Math.floor(minutes / 60);\n        const min = minutes % 60;\n        return hours === 0 ? `${min}мин` : `${hours}ч ${min}мин`;\n    };\n\n    // if (loading) return <p>Загрузка...</p>;\n    if (error) return <p>Ошибка: {error}</p>;\n    // if (!movie) return <p>Фильм не найден</p>;\n\n    return (\n        <div className={styles.infoAboutMovie}>\n            <h2 className={styles.infoAboutMovie__title}>О фильме</h2>\n            <div className={styles.description}>\n                {details.map((item, index) => (\n                    <div key={index} className={styles.description__line}>\n                        <div className={styles.description__name}>\n                            <span className={styles.description__text}>{item.label}</span>\n                            <div className={styles.description__border}></div>\n                        </div>\n                        <span className={styles.description__data}>{item.value}</span>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default InfoAboutMovie;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}